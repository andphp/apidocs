<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>创建用户赋Docker权限</title>
      <link href="docs/api/v1/test/"/>
      <url>docs/api/v1/test/</url>
      
        <content type="html"><![CDATA[<h3 id="用户操作"><a href="#用户操作" class="headerlink" title="用户操作"></a>用户操作</h3><ol><li>增加用户 useradd [username]</li><li>设置用户密码 passwd [username]</li><li>删除用户 userdel [username]</li><li>查看所有用户 cat /etc/passwd</li><li>查看当前活跃用户 w</li><li>查看简明用户列表 cat /etc/passwd|grep -v nologin|grep -v halt|grep -v shutdown|awk -F”:” ‘{ print $1”|”$3”|”$4 }’|more</li></ol><h3 id="用户组操作"><a href="#用户组操作" class="headerlink" title="用户组操作"></a>用户组操作</h3><ol><li>新建工作组 groupadd [groupname]</li><li>将用户添加进工作组 usermod -G [groupname] [username]</li><li>查看用户组 cat /etc/group</li></ol><h3 id="授权sudo权限，需要修改sudoers文件。"><a href="#授权sudo权限，需要修改sudoers文件。" class="headerlink" title="授权sudo权限，需要修改sudoers文件。"></a>授权sudo权限，需要修改sudoers文件。</h3><blockquote><p>首先找到文件位置，示例中文件在/etc/sudoers位置。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis sudoers</span><br></pre></td></tr></table></figure><blockquote><p>强调内容 修改文件权限，一般文件默认为只读。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ls -l &#x2F;etc&#x2F;sudoers 查看文件权限</span><br><span class="line">chmod -v u+w &#x2F;etc&#x2F;sudoers 修改文件权限为可编辑</span><br></pre></td></tr></table></figure><blockquote><p>修改文件，在如下位置增加一行，保存退出。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;sudoers 进入文件编辑器</span><br></pre></td></tr></table></figure><ul><li>文件内容改变如下：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root ALL&#x3D;(ALL) ALL 已有行</span><br><span class="line">username ALL&#x3D;(ALL) ALL 新增行</span><br></pre></td></tr></table></figure><blockquote><p>记得将文件权限还原回只读。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ls -l &#x2F;etc&#x2F;sudoers 查看文件权限</span><br><span class="line">chmod -v u-w &#x2F;etc&#x2F;sudoers 修改文件权限为只读</span><br></pre></td></tr></table></figure></li></ul><h3 id="docker-权限"><a href="#docker-权限" class="headerlink" title="docker 权限"></a>docker 权限</h3><blockquote><p>docker守护进程启动的时候，会默认赋予名字为docker的用户组读写Unix socket的权限，因此只要创建docker用户组，并将当前用户加入到docker用户组中，那么当前用户就有权限访问Unix socket了，进而也就可以执行docker相关命令</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo groupadd docker     #添加docker用户组</span><br><span class="line">sudo gpasswd -a $USER docker     #将登陆用户加入到docker用户组中</span><br><span class="line">newgrp docker     #更新用户组</span><br><span class="line">docker ps    #测试docker命令是否可以使用sudo正常使用</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Linux-CentOS7-升级内核的方法</title>
      <link href="docs/api/v1/login/"/>
      <url>docs/api/v1/login/</url>
      
        <content type="html"><![CDATA[<h3 id="查看操作系统内核版本"><a href="#查看操作系统内核版本" class="headerlink" title="查看操作系统内核版本"></a>查看操作系统内核版本</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -r</span><br></pre></td></tr></table></figure><h3 id="安装ELRepo到CentOS"><a href="#安装ELRepo到CentOS" class="headerlink" title="安装ELRepo到CentOS"></a>安装ELRepo到CentOS</h3><blockquote><p>最好从官方网站获取最新版本（官网地址：<a href="http://elrepo.org/tiki/tiki-index.php%EF%BC%89%EF%BC%8C%E4%B8%8B%E9%9D%A2%E4%B8%A4%E4%B8%AA%E5%91%BD%E4%BB%A4%E7%9B%B4%E6%8E%A5%E4%BB%8E%E5%AE%98%E7%BD%91%E4%B8%8A%E5%A4%8D%E5%88%B6%E6%9C%80%E6%96%B0%E7%89%88%E7%9A%84%E5%8D%B3%E5%8F%AF%E3%80%82">http://elrepo.org/tiki/tiki-index.php），下面两个命令直接从官网上复制最新版的即可。</a></p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm --import https:&#x2F;&#x2F;www.elrepo.org&#x2F;RPM-GPG-KEY-elrepo.org</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install https:&#x2F;&#x2F;www.elrepo.org&#x2F;elrepo-release-7.0-3.el7.elrepo.noarch.rpm -y</span><br></pre></td></tr></table></figure><h3 id="添加-repository-后-列出可以使用的kernel包版本"><a href="#添加-repository-后-列出可以使用的kernel包版本" class="headerlink" title="添加 repository 后, 列出可以使用的kernel包版本"></a>添加 repository 后, 列出可以使用的kernel包版本</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum --disablerepo&#x3D;&quot;*&quot; --enablerepo&#x3D;&quot;elrepo-kernel&quot; list available</span><br></pre></td></tr></table></figure><h3 id="安装需要的kernel版本，这里安装-kernel-lt"><a href="#安装需要的kernel版本，这里安装-kernel-lt" class="headerlink" title="安装需要的kernel版本，这里安装 kernel-lt"></a>安装需要的kernel版本，这里安装 kernel-lt</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum --enablerepo&#x3D;elrepo-kernel install kernel-lt -y</span><br></pre></td></tr></table></figure><blockquote><p>内核版本介绍：<br>lt:longterm的缩写：长期维护版；<br>ml:mainline的缩写：最新稳定版；</p></blockquote><h3 id="检查kernel启动顺序"><a href="#检查kernel启动顺序" class="headerlink" title="检查kernel启动顺序"></a>检查kernel启动顺序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat &#x2F;boot&#x2F;grub2&#x2F;grub.cfg</span><br></pre></td></tr></table></figure><blockquote><p>查看到刚才安装的kernel版本处在第一个位置，修改/etc/default/grub文件是系统在运行时自动执行最新的kernel</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi &#x2F;etc&#x2F;default&#x2F;grub</span><br></pre></td></tr></table></figure><p>修改</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRUB_DEFAULT&#x3D;0</span><br></pre></td></tr></table></figure><h3 id="重新创建kernel配置"><a href="#重新创建kernel配置" class="headerlink" title="重新创建kernel配置"></a>重新创建kernel配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub2-mkconfig -o &#x2F;boot&#x2F;grub2&#x2F;grub.cfg</span><br></pre></td></tr></table></figure><h3 id="重新启动服务器使用最新kernel"><a href="#重新启动服务器使用最新kernel" class="headerlink" title="重新启动服务器使用最新kernel"></a>重新启动服务器使用最新kernel</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 服务器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> CentOS </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
